#!/bin/bash
set -u
set -e
NAME="debian_sid_post_install"
DESCRIPTION="unstable/sid configuration"
GITHUB="https://github.com/vonbrownie"
SOURCE="${GITHUB}/linux-post-install/blob/master/debian_sid_post_install"
# Notes
# * Install Debian Wheezy Screenshot Tour
#   http://www.circuidipity.com/install-debian-wheezy-screenshot-tour.html

greeting() {
cat << _EOF_

$NAME - $DESCRIPTION

Howdy! Ideally this script is run following a fresh installation of
Debian GNU/Linux.

See: "Install Debian Wheezy Screenshot Tour"
http://www.circuidipity.com/install-debian-wheezy-screenshot-tour.html

This system will be configured to track Debian's sid/unstable branch
with the option of installing the lightweight Openbox window manager
+ extra apps suitable for a desktop environment.

This script should be run with ROOT privileges. Please check it before
use in a text editor and make any required modifications.

_EOF_
}

penguinista() {
cat << _EOF_

(O<
(/)_
_EOF_
}

test_root() {
if [[ $UID -ne 0 ]]
then
    printf "\n$( penguinista ) .: $NAME requires ROOT privileges to do its job.\n"
    exit 1
fi
}

interface_found() {
ip link | awk '/mtu/ {gsub(":",""); printf "\t%s", $2} END {printf "\n"}'
}

test_connect() {
if ! $(ip addr show | grep "state UP" &>/dev/null)
then
    printf "\n$( penguinista ) .: $NAME requires an active network interface."
    printf "\nINTERFACES FOUND\n"
    interface_found
    exit 1
fi
}

test_condition() {
test_root
test_connect
}

invalid_reply() {
printf "\n'$REPLY' is invalid input...\n"
}

invalid_reply_yn() {
printf "\n'$REPLY' is invalid input. Please select 'Y(es)' or 'N(o)'...\n"
}

confirm_start() {
while :
do
    read -n 1 -p "Run script now? [yN] > "
    if [[ $REPLY == [yY] ]]
    then
        printf "\nLet's roll then ...\n"
        sleep 2
        break
    elif [[ $REPLY == [nN] || $REPLY == "" ]]
    then
        penguinista
        exit
    else
        invalid_reply_yn
    fi
done
}

apt_prefer() {
    :
}

apt_source() {
    :
}

apt_key() {
    :
}

apt_purge() {
    :
}

pkg_console() {
    :
}

pkg_desktop() {
    :
}

pkg_openbox() {
    :
}

pkg_theme() {
    :
}

pkg_dvd() {
    :
}

pkg_experiment() {
    :
}

pkg_non_deb() {
    :
}

config_desktop() {
    :
}

config_blacklist() {
    :
}

config_alternative() {
    :
}

config_group() {
    :
}

config_timezone() {
    :
}

au_revoir() {
clear
printf "$( penguinista ) .: All done!\n"
}

#: START
test_condition
greeting
confirm_start

#: APT
#apt_prefer
#apt_source
#apt_key

#: CONFIGURE
#config_desktop
#config_blacklist
#config_alternative
#config_group
#config_timezone

#: FINISH
#apt_purge
#au_revoir
